<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout/admin-layout :: body}">

<div th:fragment="content">

    <h2 class="mb-3">Chi tiết yêu cầu thuê</h2>

    <div class="card p-4 shadow-sm">
        <p><strong>Họ tên:</strong> <span th:text="${req.fullName}"></span></p>
        <p><strong>SĐT:</strong> <span th:text="${req.phone}"></span></p>
        <p><strong>Phòng:</strong> <span th:text="${req.room.code}"></span></p>
        <p><strong>Ngày gửi:</strong> <span th:text="${#dates.format(req.createdAt,'dd/MM/yyyy')}"></span></p>
        <p><strong>Ghi chú:</strong> <span th:text="${req.note}"></span></p>
        <p><strong>Trạng thái:</strong> <span class="badge bg-warning" th:text="${req.status}"></span></p>
    </div>

    <hr/>

    <div th:if="${req.status.name() == 'PENDING'}">

        <a th:href="@{'/admin/requests/approve/' + ${req.id}}"
           class="btn btn-success">Duyệt yêu cầu</a>

        <form th:action="@{'/admin/requests/reject/' + ${req.id}}" method="post"
              class="mt-3 card p-3 shadow-sm">

            <label class="fw-bold">Lý do từ chối</label>
            <textarea name="reason" class="form-control" required></textarea>
            <button class="btn btn-danger mt-2">Từ chối</button>

        </form>

    </div>

    <a href="/admin/requests" class="btn btn-secondary mt-3">⬅ Quay lại</a>

</div>
</html>
